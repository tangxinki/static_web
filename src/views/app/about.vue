<template>
    <div>
        <div v-show="islock" class=" p-6">
            <van-button type="success" @click="showTop = true">{{ dateVal }}</van-button>
            <div>{{ state.month }}æœˆå…±æ‰“å¡{{ state.thisMonthData }}æ¬¡ï¼Œç›¸æ¯”ä¸Šä¸ªæœˆ{{ state.reduce > 0 ? 'å¤š' : 'å°‘' }}äº†{{
                Math.abs(state.reduce) }}æ¬¡
            </div>
            <div>
                <p>å¹´åº¦æ•°æ®ï¼š</p>
                <p>{{ state.year }}å¹´å…±æ‰“å¡{{ state.thisYearLen }}æ¬¡ï¼Œæ‰“å¡æœ€å¤šçš„æœˆä»½æ˜¯{{ state.maxMonth }}æœˆï¼Œ{{ state.maxMonthTimes
                }}æ¬¡ï¼Œæœ€å°‘çš„æœˆä»½æ˜¯{{ state.minMonth }}æœˆï¼Œ{{ state.minMonthTimes }}æ¬¡ã€‚</p>
                <p>æœ€å¸¸æ‰“å¡çš„æ—¶é—´æ˜¯åœ¨{{ state.alawaysHour }}ç‚¹</p>
                <p>å»å¹´å…±æ‰“å¡{{ state.prevYearLen }}æ¬¡ï¼Œä»Šå¹´ç›¸æ¯”å»å¹´å¢å¹…{{ state.rate }}%</p>
            </div>
            <div class="chart w-[90vw] h-[50vh]"></div>
        </div>
        <van-popup v-model:show="showTop" position="bottom" :style="{ height: '37%' }">
            <van-date-picker @cancel="showTop = false" @confirm="confirm" v-model="currentDate" title="é€‰æ‹©å¹´æœˆ"
                :min-date="new Date(2023, 10, 1)" :columns-type="['year', 'month']" />
        </van-popup>
    </div>
</template>

<script setup>
import { useStatistics } from './about'
const { state, bootstrap, islock, currentDate, confirm, dateVal, showTop } = useStatistics()
console.log('ğŸ’¨ğŸ’¨ğŸ’¨ ~ islock:', islock)
onMounted(bootstrap)
</script>